<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="mm.gui.GameEditorController" stylesheets="@../css/style.css"
            fx:id="rootPane">
    <!-- Toolbar am oberen Rand -->
    <top>
        <VBox>
            <ToolBar>
                <Button text="Exit" onAction="#onExit" styleClass="editor-button"/>
                <Separator orientation="VERTICAL"/>
                <Button text="Reset" onAction="#onReset" styleClass="editor-button"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="undoButton" text="RÃ¼ckgÃ¤ngig" onAction="#onUndo" styleClass="editor-button"/>
                <Button fx:id="redoButton" text="Wiederholen" onAction="#onRedo" styleClass="editor-button"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="playButton" text="â–¶ PLAY" onAction="#onPlay" styleClass="editor-button play-button"/>
            </ToolBar>
            
            <!-- Level-Aufgabe anzeigen -->
            <GridPane hgap="10" vgap="5">
                <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                <Label text="Aufgabe:" GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="task-label"/>
                <Label fx:id="taskLabel" text="Bringe den Ball in die Zielzone" 
                       GridPane.columnIndex="1" GridPane.rowIndex="0" 
                       GridPane.columnSpan="3" styleClass="task-description"/>
            </GridPane>
        </VBox>
    </top>
    
    <!-- Hauptbereich mit Spielfeld -->
    <center>
        <StackPane>
            <!-- Spielfeld mit fester GrÃ¶ÃŸe und Rahmen -->
            <Pane fx:id="editorCanvas" prefWidth="800" prefHeight="600" 
                  styleClass="game-field" 
                  style="-fx-background-color: #f0f0f0; -fx-border-color: #666666; -fx-border-width: 2;">
                <!-- Platzhalter fÃ¼r Spielobjekte (statische Level-Objekte + platzierte Objekte) -->
            </Pane>
            
            <!-- Exit-BestÃ¤tigungs-Dialog als Overlay -->
            <StackPane fx:id="exitConfirmationOverlay" visible="false" styleClass="overlay-background">
                <VBox alignment="CENTER" spacing="20.0" styleClass="confirmation-dialog">
                    <Label styleClass="dialog-title" text="Editor verlassen?" />
                    <Label text="MÃ¶chten Sie den Editor wirklich verlassen?" />
                    <Label fx:id="unsavedChangesWarning" text="Sie haben ungespeicherte Ã„nderungen!" 
                           visible="false" styleClass="warning-text" />
                    <HBox alignment="CENTER" spacing="20.0">
                        <Button mnemonicParsing="false" onAction="#onConfirmExit" text="Ja" styleClass="dialog-button" />
                        <Button mnemonicParsing="false" onAction="#onCancelExit" text="Nein" styleClass="dialog-button" />
                    </HBox>
                    <padding>
                        <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
                    </padding>
                </VBox>
            </StackPane>
        </StackPane>
    </center>
    
    <!-- Inventar auf der rechten Seite -->
    <right>
        <VBox spacing="10" styleClass="inventory-panel" prefWidth="200">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <Label text="Inventar" styleClass="section-title"/>
            <ScrollPane fx:id="inventoryScrollPane" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS">
                <content>
                    <VBox fx:id="inventoryContainer" spacing="5">
                        <padding>
                            <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                        </padding>
                    </VBox>
                </content>
            </ScrollPane>
        </VBox>
    </right>
    
    <!-- Untere Leiste mit Undo/Redo und MÃ¼lleimer -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="bottom-bar">
            <children>
                <Region HBox.hgrow="ALWAYS" />
                <StackPane fx:id="trashArea" styleClass="trash-area" minWidth="50" minHeight="50">
                    <Label text="ðŸ—‘" styleClass="trash-icon" />
                </StackPane>
            </children>
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>
        </HBox>
    </bottom>
</BorderPane> 